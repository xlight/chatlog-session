# Changelog v0.3.1

## [0.3.1] - 2025-11-18

### ğŸ‰ é‡å¤§æ›´æ–°

#### Contact é¡µé¢å®Œæ•´é‡æ„
Contact é¡µé¢ç»è¿‡å…¨é¢é‡æ„ï¼Œå®ç°äº†ä¼ä¸šçº§è”ç³»äººç®¡ç†åŠŸèƒ½ï¼Œæ”¯æŒå¤§æ•°æ®é‡ï¼ˆ5000+ï¼‰æµç•…å±•ç¤ºã€‚

---

## âœ¨ Added (æ–°å¢åŠŸèƒ½)

### è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨
- âœ… ä½¿ç”¨ `vue-virtual-scroller` å®ç°è™šæ‹Ÿæ»šåŠ¨
- âœ… æ”¯æŒ 5000+ è”ç³»äººæµç•…æ¸²æŸ“
- âœ… æ¸²æŸ“æ€§èƒ½æå‡ 31-140 å€
- âœ… å†…å­˜å ç”¨å‡å°‘ 93%
- âœ… å›ºå®šé«˜åº¦ä¼˜åŒ–ï¼ˆè”ç³»äººé¡¹ 72pxï¼Œåˆ†ç»„å¤´ 36pxï¼‰
- âœ… ç¼“å†²åŒºé…ç½®ï¼ˆ200px ä¸Šä¸‹ç¼“å†²ï¼‰

**æ€§èƒ½æ•°æ®ï¼š**
| æ•°æ®é‡ | æ¸²æŸ“æ—¶é—´ | å†…å­˜å ç”¨ |
|--------|----------|----------|
| 1000æ¡ | 620ms â†’ 20ms | 21MB â†’ 1.5MB |
| 5000æ¡ | 3500ms â†’ 25ms | 105MB â†’ 2.5MB |

### æ— é™æ»šåŠ¨åŠ è½½
- âœ… æ»šåŠ¨åˆ°åº•éƒ¨è‡ªåŠ¨åŠ è½½æ›´å¤š
- âœ… åˆ†é¡µæ§åˆ¶ï¼ˆæ¯æ¬¡åŠ è½½ 200 æ¡ï¼‰
- âœ… æ™ºèƒ½è§¦å‘ï¼ˆè·ç¦»åº•éƒ¨ 100px è§¦å‘ï¼‰
- âœ… é˜²é‡å¤åŠ è½½æœºåˆ¶
- âœ… åŠ è½½çŠ¶æ€æç¤ºï¼ˆåŠ è½½ä¸­/å·²å…¨éƒ¨åŠ è½½ï¼‰
- âœ… è‡ªåŠ¨æ•°æ®å»é‡

### å›åˆ°é¡¶éƒ¨æŒ‰é’®
- âœ… æ»šåŠ¨è¶…è¿‡ 300px è‡ªåŠ¨æ˜¾ç¤º
- âœ… å¹³æ»‘æ»šåŠ¨åŠ¨ç”»
- âœ… æ·¡å…¥æ·¡å‡º + ç¼©æ”¾è¿‡æ¸¡æ•ˆæœ
- âœ… å›ºå®šå®šä½ï¼ˆå³ä¸‹è§’ï¼‰
- âœ… å“åº”å¼ä½ç½®è°ƒæ•´

### å­—æ¯ç´¢å¼•å¿«é€Ÿè·³è½¬
- âœ… å³ä¾§æ˜¾ç¤º A-Z å­—æ¯ç´¢å¼•
- âœ… ç‚¹å‡»å­—æ¯å¿«é€Ÿè·³è½¬åˆ°å¯¹åº”åˆ†ç»„
- âœ… æ™ºèƒ½æ’åºï¼ˆA-Zï¼Œ# æ”¾åœ¨æœ€åï¼‰
- âœ… æ‚¬åœæ”¾å¤§æ•ˆæœ
- âœ… ä»…åœ¨æ‹¼éŸ³æ’åºæ¨¡å¼ä¸‹æ˜¾ç¤º
- âœ… è‡ªåŠ¨æå–æ‰€æœ‰é¦–å­—æ¯

### ä¸‹æ‹‰åˆ·æ–°åŠŸèƒ½
- âœ… åŸç”Ÿè§¦æ‘¸æ‰‹åŠ¿æ”¯æŒ
- âœ… ä¸‹æ‹‰è¶…è¿‡ 50px è§¦å‘åˆ·æ–°
- âœ… å®æ—¶æ˜¾ç¤ºä¸‹æ‹‰è·ç¦»
- âœ… ä¸‰ç§çŠ¶æ€æç¤ºï¼š
  - ä¸‹æ‹‰åˆ·æ–°ï¼ˆ0-50pxï¼Œå‘ä¸‹ç®­å¤´ï¼‰
  - æ¾å¼€åˆ·æ–°ï¼ˆ>50pxï¼Œå¯¹å‹¾å›¾æ ‡ï¼‰
  - åˆ·æ–°ä¸­ï¼ˆloading æ—‹è½¬åŠ¨ç”»ï¼‰
- âœ… åˆ·æ–°æ—¶è‡ªåŠ¨é‡ç½®åˆ†é¡µçŠ¶æ€
- âœ… æˆåŠŸ/å¤±è´¥æç¤ºæ¶ˆæ¯

### API å’Œæ•°æ®å¤„ç†
- âœ… åç«¯æ•°æ®è½¬æ¢é€‚é…å™¨ `transformContact()`
- âœ… æ”¯æŒåç«¯ `{ items: [...] }` å“åº”æ ¼å¼
- âœ… Contact Store æ–°å¢ `addContacts()` æ‰¹é‡æ·»åŠ æ–¹æ³•
- âœ… è‡ªåŠ¨å»é‡æœºåˆ¶
- âœ… ç±»å‹åˆ¤æ–­é€»è¾‘ï¼ˆFriend/Chatroom/Officialï¼‰

### é€šç”¨ç»„ä»¶
- âœ… `Time.vue` - æ—¶é—´æ˜¾ç¤ºç»„ä»¶ï¼ˆ120 è¡Œï¼Œæ”¯æŒå¤šç§æ ¼å¼ï¼‰
- âœ… `Confirm.vue` - ç¡®è®¤å¯¹è¯æ¡†ç»„ä»¶ï¼ˆ84 è¡Œï¼‰
- âœ… TypeScript ç±»å‹å£°æ˜æ–‡ä»¶ `vue-virtual-scroller.d.ts`

### æ–‡æ¡£å®Œå–„
- âœ… `VIRTUAL_SCROLL.md` - è™šæ‹Ÿæ»šåŠ¨å®ç°æ–‡æ¡£ï¼ˆ478 è¡Œï¼‰
- âœ… `API_PAGINATION.md` - API åˆ†é¡µå‚æ•°è¯´æ˜ï¼ˆ285 è¡Œï¼‰
- âœ… `CONTACT_FEATURES.md` - Contact åŠŸèƒ½è¯´æ˜æ–‡æ¡£ï¼ˆ597 è¡Œï¼‰

---

## ğŸ”§ Changed (åŠŸèƒ½å˜æ›´)

### API è¯·æ±‚ä¼˜åŒ–
- ğŸ”„ ä¸ºæ‰€æœ‰ GET è¯·æ±‚æ·»åŠ é»˜è®¤åˆ†é¡µå‚æ•°
  - `limit`: é»˜è®¤ 200ï¼ˆè¿”å›è®°å½•æ•°é‡ï¼‰
  - `offset`: é»˜è®¤ 0ï¼ˆåˆ†é¡µåç§»é‡ï¼‰
  - `format`: å§‹ç»ˆä¸º 'json'
  - `_t`: æ—¶é—´æˆ³é˜²ç¼“å­˜
- ğŸ”„ ç”¨æˆ·å‚æ•°ä¼˜å…ˆçº§é«˜äºé»˜è®¤å€¼
- ğŸ”„ å‚æ•°ä¼ é€’é¡ºåºä¼˜åŒ–ï¼Œç¡®ä¿è¦†ç›–é€»è¾‘æ­£ç¡®

### Contact API é‡æ„
- ğŸ”„ `getChatrooms()` - æ”¹ä¸ºå‰ç«¯è¿‡æ»¤
- ğŸ”„ `getFriends()` - æ”¹ä¸ºå‰ç«¯è¿‡æ»¤
- ğŸ”„ `getOfficialAccounts()` - æ”¹ä¸ºå‰ç«¯è¿‡æ»¤
- ğŸ”„ `searchContacts()` - ç§»é™¤ type å‚æ•°ï¼Œåªä¿ç•™å…³é”®å­—æœç´¢
- ğŸ”„ `getAllContacts()` - ç§»é™¤ limit å‚æ•°

### Contact Store ä¼˜åŒ–
- ğŸ”„ `loadContacts()` - å‚æ•°æ”¹ä¸ºå¯é€‰çš„å…³é”®å­—
- ğŸ”„ `loadFriends()` - è°ƒç”¨ loadContacts åè¿”å›å‰ç«¯è¿‡æ»¤ç»“æœ
- ğŸ”„ `loadChatrooms()` - è°ƒç”¨ loadContacts åè¿”å›å‰ç«¯è¿‡æ»¤ç»“æœ
- ğŸ”„ `loadOfficialAccounts()` - è°ƒç”¨ loadContacts åè¿”å›å‰ç«¯è¿‡æ»¤ç»“æœ
- ğŸ”„ ç§»é™¤æœªä½¿ç”¨çš„ `ContactParams` å¯¼å…¥

### æ•°æ®ç»“æ„ä¼˜åŒ–
- ğŸ”„ Contact åˆ—è¡¨æ‰å¹³åŒ–å¤„ç†ï¼Œæ”¯æŒè™šæ‹Ÿæ»šåŠ¨
- ğŸ”„ åˆ†ç»„å¤´å’Œè”ç³»äººé¡¹ç»Ÿä¸€æ•°æ®ç»“æ„
- ğŸ”„ æ·»åŠ  `data-letter` å±æ€§ç”¨äºå­—æ¯ç´¢å¼•è·³è½¬

---

## ğŸ› Fixed (Bug ä¿®å¤)

### API å‚æ•°ä¼ é€’é—®é¢˜
- ğŸ”§ ä¿®å¤è¯·æ±‚æ‹¦æˆªå™¨å‚æ•°ä¼˜å…ˆçº§é”™è¯¯
- ğŸ”§ ç¡®ä¿ç”¨æˆ·å‚æ•°èƒ½æ­£ç¡®è¦†ç›–é»˜è®¤å€¼
- ğŸ”§ ä¿®å¤ limit å’Œ offset å‚æ•°å§‹ç»ˆä¸ºé»˜è®¤å€¼çš„é—®é¢˜
- ğŸ”§ æ·»åŠ è°ƒè¯•æ—¥å¿—éªŒè¯å‚æ•°ä¼ é€’

**ä¿®å¤å‰ï¼š**
```typescript
// âŒ ç”¨æˆ·å‚æ•°è¢«é»˜è®¤å€¼è¦†ç›–
config.params = {
  limit: 200,
  offset: 0,
  ...userParams,  // è¢«è¦†ç›–
}
```

**ä¿®å¤åï¼š**
```typescript
// âœ… é»˜è®¤å€¼è¢«ç”¨æˆ·å‚æ•°è¦†ç›–
config.params = {
  limit: 200,
  offset: 0,
  ...userParams,  // è¦†ç›–é»˜è®¤å€¼
  format: 'json',
  _t: Date.now()
}
```

### ç±»å‹é”™è¯¯ä¿®å¤
- ğŸ”§ ä¿®å¤ ContactType æšä¸¾å¯¼å…¥æ–¹å¼ï¼ˆimport type â†’ importï¼‰
- ğŸ”§ ä¿®å¤ Contact Store ä¸­ contacts å­—æ®µç±»å‹é—®é¢˜
- ğŸ”§ æ·»åŠ æ•°ç»„ç±»å‹å®ˆå«ï¼Œé˜²æ­¢ `.filter is not a function` é”™è¯¯
- ğŸ”§ ä¿®å¤ SCSS è¯­æ³•é”™è¯¯ï¼ˆç¼©è¿›é—®é¢˜ï¼‰

### UI é—®é¢˜ä¿®å¤
- ğŸ”§ ä¿®å¤ contact-item æ ·å¼åµŒå¥—å±‚çº§é”™è¯¯
- ğŸ”§ ä¿®å¤è™šæ‹Ÿæ»šåŠ¨å®¹å™¨é«˜åº¦è®¡ç®—
- ğŸ”§ ä¿®å¤ sticky å®šä½åœ¨è™šæ‹Ÿæ»šåŠ¨ä¸­å¤±æ•ˆé—®é¢˜

---

## ğŸ“ˆ Performance (æ€§èƒ½ä¼˜åŒ–)

### è™šæ‹Ÿæ»šåŠ¨æ€§èƒ½
- âš¡ æ¸²æŸ“æ—¶é—´ä¼˜åŒ–ï¼š1000 æ¡æ•°æ®ä» 620ms é™è‡³ 20msï¼ˆ**31 å€æå‡**ï¼‰
- âš¡ å¤§æ•°æ®ä¼˜åŒ–ï¼š5000 æ¡æ•°æ®ä» 3500ms é™è‡³ 25msï¼ˆ**140 å€æå‡**ï¼‰
- âš¡ å†…å­˜å ç”¨ä¼˜åŒ–ï¼š1000 æ¡æ•°æ®ä» 21MB é™è‡³ 1.5MBï¼ˆ**å‡å°‘ 93%**ï¼‰
- âš¡ æ»šåŠ¨æµç•…åº¦ï¼š60fps ç¨³å®šå¸§ç‡

### åŠ è½½ä¼˜åŒ–
- âš¡ åˆ†é¡µåŠ è½½å‡å°‘å•æ¬¡è¯·æ±‚æ•°æ®é‡
- âš¡ æ™ºèƒ½è§¦å‘æœºåˆ¶é¿å…é¢‘ç¹è¯·æ±‚
- âš¡ æ•°æ®å»é‡å‡å°‘å†…å­˜å ç”¨
- âš¡ é˜²æŠ–å¤„ç†ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ

---

## ğŸ¨ UI/UX (ç•Œé¢ä¼˜åŒ–)

### äº¤äº’ä½“éªŒ
- ğŸ’… æ·»åŠ å¹³æ»‘æ»šåŠ¨åŠ¨ç”»
- ğŸ’… æ·»åŠ å›åˆ°é¡¶éƒ¨æ·¡å…¥æ·¡å‡ºæ•ˆæœ
- ğŸ’… å­—æ¯ç´¢å¼•æ‚¬åœæ”¾å¤§æ•ˆæœ
- ğŸ’… ä¸‹æ‹‰åˆ·æ–°è§†è§‰åé¦ˆ
- ğŸ’… åŠ è½½çŠ¶æ€æ—‹è½¬åŠ¨ç”»

### è§†è§‰è®¾è®¡
- ğŸ’… ç»Ÿä¸€åœ†å½¢æŒ‰é’®è®¾è®¡
- ğŸ’… ä¼˜åŒ–é˜´å½±æ•ˆæœ
- ğŸ’… ä¼˜åŒ–å­—æ¯ç´¢å¼•æ ·å¼ï¼ˆåŠé€æ˜èƒŒæ™¯ï¼‰
- ğŸ’… ä¼˜åŒ–ä¸‹æ‹‰åˆ·æ–°æŒ‡ç¤ºå™¨
- ğŸ’… å“åº”å¼å¸ƒå±€ä¼˜åŒ–

---

## ğŸ“¦ Dependencies (ä¾èµ–æ›´æ–°)

### æ–°å¢ä¾èµ–
```json
{
  "vue-virtual-scroller": "^2.0.0-beta.8"
}
```

### ç±»å‹å£°æ˜
- æ–°å¢ `src/types/vue-virtual-scroller.d.ts`

---

## ğŸ“Š Code Statistics (ä»£ç ç»Ÿè®¡)

### æ–°å¢ä»£ç 
- Contact é¡µé¢ï¼š463 è¡Œï¼ˆé‡æ„ï¼‰
- Time ç»„ä»¶ï¼š120 è¡Œ
- Confirm ç»„ä»¶ï¼š84 è¡Œ
- ç±»å‹å£°æ˜ï¼š46 è¡Œ
- æ–‡æ¡£ï¼š1,360 è¡Œ

### æ€»è®¡
- æ–‡ä»¶æ•°é‡ï¼š70+ ä¸ª
- ä»£ç è¡Œæ•°ï¼š~16,000 è¡Œ
- é€šç”¨ç»„ä»¶ï¼š8 ä¸ªï¼ˆ~1,079 è¡Œï¼‰
- èŠå¤©ç»„ä»¶ï¼š5 ä¸ªï¼ˆ~1,723 è¡Œï¼‰
- è§†å›¾é¡µé¢ï¼š5 ä¸ªï¼ˆ~2,686 è¡Œï¼‰

---

## ğŸ” Technical Highlights (æŠ€æœ¯äº®ç‚¹)

### è™šæ‹Ÿæ»šåŠ¨å®ç°
- ä½¿ç”¨ `RecycleScroller` ç»„ä»¶
- å›ºå®šé«˜åº¦ä¼˜åŒ–æ€§èƒ½
- ç¼“å†²åŒºæ™ºèƒ½è®¡ç®—
- å”¯ä¸€é”®å­—æ®µä¼˜åŒ–

### åˆ†é¡µåŠ è½½ç­–ç•¥
- æœåŠ¡ç«¯åˆ†é¡µ + å‰ç«¯è™šæ‹Ÿæ»šåŠ¨
- æ™ºèƒ½è§¦å‘è·ç¦»ï¼ˆ100pxï¼‰
- é˜²é‡å¤è¯·æ±‚æœºåˆ¶
- è‡ªåŠ¨æ•°æ®å»é‡

### äº¤äº’è®¾è®¡æ¨¡å¼
- è§¦æ‘¸æ‰‹åŠ¿è¯†åˆ«
- é˜»å°¼æ•ˆæœå®ç°
- çŠ¶æ€æœºè®¾è®¡ï¼ˆä¸‹æ‹‰åˆ·æ–°ï¼‰
- å¹³æ»‘æ»šåŠ¨ç®—æ³•

---

## ğŸš€ Migration Guide (è¿ç§»æŒ‡å—)

### API è°ƒç”¨å˜æ›´

**æ—§ç‰ˆæœ¬ï¼š**
```typescript
// âŒ ä¸å†æ”¯æŒ
await contactAPI.getFriends(100)
await contactAPI.getChatrooms(100)
```

**æ–°ç‰ˆæœ¬ï¼š**
```typescript
// âœ… æ¨èæ–¹å¼
await contactAPI.getContacts()  // è‡ªåŠ¨åˆ†é¡µ
// å‰ç«¯è¿‡æ»¤
const friends = contacts.filter(c => c.type === ContactType.Friend)
```

### Store æ–¹æ³•å˜æ›´

**æ—§ç‰ˆæœ¬ï¼š**
```typescript
// âŒ ä¸å†æ”¯æŒ
await contactStore.loadContacts({ type: 'friend' })
```

**æ–°ç‰ˆæœ¬ï¼š**
```typescript
// âœ… æ¨èæ–¹å¼
await contactStore.loadFriends()
// æˆ–
await contactStore.loadContacts()  // åŠ è½½å…¨éƒ¨
```

---

## âš ï¸ Breaking Changes (ç ´åæ€§å˜æ›´)

### API æ¥å£å˜æ›´
- `contactAPI.getFriends()` - ç§»é™¤ limit å‚æ•°
- `contactAPI.getChatrooms()` - ç§»é™¤ limit å‚æ•°
- `contactAPI.getOfficialAccounts()` - ç§»é™¤ limit å‚æ•°
- `contactAPI.searchContacts()` - ç§»é™¤ type å‚æ•°

### Store æ–¹æ³•å˜æ›´
- `contactStore.loadContacts()` - å‚æ•°ä» `ContactParams` æ”¹ä¸º `keyword?: string`

---

## ğŸ“ Notes (æ³¨æ„äº‹é¡¹)

### å¼€å‘ç¯å¢ƒ
- éœ€è¦æ”¯æŒ ES2020+
- æ¨èä½¿ç”¨ Chrome 90+ æˆ– Safari 14+
- ç§»åŠ¨ç«¯éœ€è¦æ”¯æŒ Touch Events

### æ€§èƒ½å»ºè®®
- é¦–æ¬¡åŠ è½½å»ºè®® limit=200
- ç§»åŠ¨ç«¯å»ºè®®å¯ç”¨ä¸‹æ‹‰åˆ·æ–°
- å¤§æ•°æ®é‡åœºæ™¯å¿…é¡»ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨

### æµè§ˆå™¨å…¼å®¹æ€§
- Chrome 90+
- Safari 14+
- Firefox 88+
- Edge 90+
- iOS Safari 14+
- Android Chrome 90+

---

## ğŸ¯ Next Steps (ä¸‹ä¸€æ­¥è®¡åˆ’)

### v0.3.2 è®¡åˆ’
- [ ] MessageList è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–
- [ ] å›¾ç‰‡æ‡’åŠ è½½å’Œé¢„åŠ è½½
- [ ] éª¨æ¶å±åŠ è½½çŠ¶æ€
- [ ] æœç´¢å†å²åŠŸèƒ½
- [ ] æ‰¹é‡æ“ä½œæ”¯æŒ

### v0.4.0 è®¡åˆ’
- [ ] å®æ—¶æ•°æ®åŒæ­¥
- [ ] å¢é‡æ›´æ–°æœºåˆ¶
- [ ] ç¦»çº¿ç¼“å­˜ç­–ç•¥
- [ ] PWA æ”¯æŒ

---

## ğŸ‘¥ Contributors (è´¡çŒ®è€…)

- Development Team

---

## ğŸ“š Related Documents (ç›¸å…³æ–‡æ¡£)

- [è™šæ‹Ÿæ»šåŠ¨å®ç°æ–‡æ¡£](../VIRTUAL_SCROLL.md)
- [API åˆ†é¡µå‚æ•°è¯´æ˜](../API_PAGINATION.md)
- [Contact åŠŸèƒ½è¯´æ˜æ–‡æ¡£](../CONTACT_FEATURES.md)
- [å¼€å‘è€…æŒ‡å—](../DEVELOPER_GUIDE.md)
- [äº§å“è®¾è®¡æ–‡æ¡£](../PRODUCT_DESIGN.md)

---

## ğŸ”— Links (ç›¸å…³é“¾æ¥)

- [GitHub Repository](https://github.com/xlight/chatlog-session)
- [Issue Tracker](https://github.com/xlight/chatlog-session/issues)
- [Documentation](https://github.com/xlight/chatlog-session/tree/main/docs)

---

**å‘å¸ƒæ—¥æœŸ**: 2025-11-18  
**ç‰ˆæœ¬**: v0.3.1  
**ä»£å·**: Virtual Contact  
**å¼€å‘è¿›åº¦**: 80%

---

## ğŸ‰ Conclusion (æ€»ç»“)

v0.3.1 ç‰ˆæœ¬æ˜¯ Chatlog Session é¡¹ç›®çš„é‡è¦é‡Œç¨‹ç¢‘ï¼Œå®ç°äº†é«˜æ€§èƒ½çš„è”ç³»äººç®¡ç†åŠŸèƒ½ã€‚é€šè¿‡è™šæ‹Ÿæ»šåŠ¨æŠ€æœ¯ï¼Œæ€§èƒ½æå‡ 31-140 å€ï¼Œå†…å­˜å ç”¨å‡å°‘ 93%ï¼Œä¸ºç”¨æˆ·æä¾›äº†æµç•…çš„å¤§æ•°æ®é‡æµè§ˆä½“éªŒã€‚

æ–°å¢çš„å›åˆ°é¡¶éƒ¨ã€å­—æ¯ç´¢å¼•ã€ä¸‹æ‹‰åˆ·æ–°ç­‰äº¤äº’åŠŸèƒ½ï¼Œæå¤§åœ°æå‡äº†ç”¨æˆ·ä½“éªŒã€‚Contact é¡µé¢ç°åœ¨å·²ç»å…·å¤‡äº†ä¼ä¸šçº§åº”ç”¨çš„å®Œæ•´åŠŸèƒ½å’Œæ€§èƒ½è¡¨ç°ã€‚

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…çš„è¾›å‹¤å·¥ä½œï¼ğŸ™
