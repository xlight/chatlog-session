# Chatlog Session 用户使用手册

## 📖 目录

- [1. 快速开始](#1-快速开始)
- [2. 界面介绍](#2-界面介绍)
- [3. 功能使用](#3-功能使用)
- [4. 常见问题](#4-常见问题)
- [5. 最佳实践](#5-最佳实践)
- [6. 快捷键](#6-快捷键)

---

## 1. 快速开始

### 1.1 准备工作

在使用 Chatlog Session 之前，请确保：

1. ✅ 已安装并启动 [Chatlog](https://github.com/sjzar/chatlog) 服务
2. ✅ Chatlog 服务运行在默认地址 `http://127.0.0.1:5030`
3. ✅ 已成功解密微信数据库

### 1.2 启动应用

**开发模式**：
```bash
npm run dev
```

**生产环境**：
```bash
npm run build
npm run preview
```

### 1.3 首次使用

1. 打开浏览器访问应用地址（默认 `http://localhost:5173`）
2. 应用会自动连接 Chatlog API
3. 加载完成后，您将看到会话列表

---

## 2. 界面介绍

### 2.1 整体布局

Chatlog Session 采用三栏布局设计，类似微信桌面版：

```
┌─────────┬──────────────┬────────────────────────┐
│  侧边栏  │   会话列表    │      消息显示区         │
│         │              │                        │
│  💬 会话  │  🔍 搜索      │  ← 联系人名称           │
│  👤 联系人│  ─────────   │  ─────────────────────│
│  ⭐ 收藏  │  会话项 1     │  对方消息               │
│  ⚙️ 设置  │  会话项 2     │  我的消息               │
│         │  会话项 3     │  [输入区域]            │
└─────────┴──────────────┴────────────────────────┘
```

### 2.2 侧边栏

侧边栏提供主要功能入口：

| 图标 | 功能 | 说明 |
|------|------|------|
| 💬 | 会话 | 查看所有聊天会话 |
| 👤 | 联系人 | 浏览联系人和群组列表 |
| ⭐ | 收藏 | 查看收藏的消息（即将推出）|
| 🔍 | 搜索 | 全局搜索功能 |
| ⚙️ | 设置 | 应用设置 |

### 2.3 会话列表

会话列表显示所有聊天对话：

**会话项包含**：
- 📷 头像：联系人或群组头像
- 👤 名称：昵称或群组名称
- 💬 消息预览：最后一条消息的内容
- 🕐 时间：最后消息时间
- 📌 置顶标识：置顶的会话显示在顶部

**状态标识**：
- `[图片]` - 图片消息
- `[视频]` - 视频消息
- `[语音]` - 语音消息
- `[文件]` - 文件消息

### 2.4 消息显示区

消息显示区展示选中会话的聊天记录：

**顶部导航栏**：
- ← 返回按钮（移动端）
- 联系人名称
- 🔍 搜索按钮
- ⋮ 更多选项

**消息列表**：
- 按时间顺序显示
- 对方消息显示在左侧（白色气泡）
- 自己的消息显示在右侧（绿色气泡）
- 时间戳显示在消息下方

---

## 3. 功能使用

### 3.1 查看聊天记录

#### 基本操作

1. **打开会话**
   - 在会话列表中点击任意会话
   - 消息区会加载该会话的聊天记录

2. **滚动浏览**
   - 向上滚动查看历史消息
   - 向下滚动查看最新消息
   - 到达顶部时自动加载更早的消息

3. **跳转到日期**
   - 点击顶部的日期选择器
   - 选择目标日期
   - 快速跳转到该日期的消息

#### 消息类型

**文本消息**：
- 直接显示文本内容
- 支持长按选择和复制
- 自动识别链接（点击打开）

**图片消息**：
- 显示缩略图
- 点击查看大图
- 支持缩放、旋转
- 可以下载原图

**视频消息**：
- 显示视频封面
- 点击播放视频
- 支持全屏播放
- 显示播放控制条

**语音消息**：
- 显示语音条和时长
- 点击播放语音
- 自动转换为 MP3 格式
- 显示播放进度

**文件消息**：
- 显示文件图标和名称
- 显示文件大小
- 点击下载文件

### 3.2 搜索功能

#### 全局搜索

1. 点击侧边栏的搜索图标 🔍
2. 在搜索框输入关键词
3. 查看搜索结果列表
4. 点击结果跳转到具体消息

**搜索技巧**：
- 输入多个关键词用空格分隔
- 支持模糊搜索
- 搜索结果会高亮显示关键词

#### 会话内搜索

1. 打开某个会话
2. 点击顶部的搜索按钮
3. 输入关键词
4. 使用 ↑ ↓ 按钮在结果间跳转

#### 高级筛选

在搜索界面点击"高级筛选"：

**时间范围**：
- 选择起始日期和结束日期
- 或选择预设时间段（今天、最近7天、最近30天等）

**消息类型**：
- ☑️ 文本消息
- ☑️ 图片消息
- ☑️ 视频消息
- ☑️ 语音消息
- ☑️ 文件消息

**发送者**：
- 选择特定的发送者
- 在群聊中筛选某个成员的消息

### 3.3 多媒体查看

#### 图片查看器

**打开方式**：
- 点击消息中的图片

**功能说明**：
- 🔍 **缩放**：双指捏合或鼠标滚轮
- 🔄 **旋转**：点击旋转按钮
- ◀️ ▶️ **切换**：查看同会话的其他图片
- 💾 **下载**：保存图片到本地
- ❌ **关闭**：点击关闭按钮或按 ESC 键

**快捷操作**：
- `左键拖拽`：移动图片
- `滚轮`：缩放图片
- `左右箭头键`：切换图片
- `ESC`：关闭查看器

#### 视频播放器

**打开方式**：
- 点击消息中的视频

**功能说明**：
- ▶️ **播放/暂停**：点击播放按钮
- 🔊 **音量控制**：调整音量大小
- ⏩ **进度控制**：拖动进度条跳转
- 🖥️ **全屏播放**：点击全屏按钮
- ⚙️ **播放速度**：调整播放速度（0.5x - 2x）

#### 语音播放

**播放方式**：
- 点击语音消息条

**播放状态**：
- ▶️ 未播放状态
- ⏸️ 正在播放
- 显示播放进度和剩余时长

**特性**：
- 自动转换 SILK 格式为 MP3
- 支持后台播放
- 自动播放下一条（可选）

### 3.4 联系人管理

#### 查看联系人列表

1. 点击侧边栏的"联系人"图标
2. 浏览完整的联系人列表
3. 支持按字母排序

#### 联系人分类

- **好友**：个人联系人
- **群聊**：群组列表
- **公众号**：订阅的公众号
- **企业微信**：企业联系人

#### 搜索联系人

1. 在联系人页面顶部的搜索框输入
2. 支持搜索昵称、备注、微信号
3. 点击搜索结果查看详情

#### 联系人详情

点击联系人查看详细信息：
- 头像和昵称
- 备注名
- 微信号
- 聊天消息统计
- 快速跳转到聊天记录

### 3.5 数据导出（v1.3+）

#### 导出聊天记录

1. 打开要导出的会话
2. 点击右上角的"更多"按钮
3. 选择"导出聊天记录"
4. 选择导出格式和时间范围

**支持的格式**：
- 📄 **TXT**：纯文本格式
- 📊 **CSV**：表格格式，可用 Excel 打开
- 📑 **JSON**：结构化数据格式
- 🌐 **HTML**：网页格式，包含样式

**导出选项**：
- 选择时间范围
- 是否包含多媒体文件
- 是否包含系统消息

#### 批量导出

1. 进入设置页面
2. 选择"数据管理"
3. 点击"批量导出"
4. 选择要导出的会话
5. 设置导出选项
6. 开始导出

### 3.6 设置

#### 通用设置

- **语言**：中文 / English
- **主题**：亮色 / 暗色 / 自动
- **字体大小**：小 / 中 / 大
- **消息密度**：紧凑 / 舒适 / 宽松

#### 聊天设置

- **消息预览**：显示/隐藏消息预览
- **时间格式**：12小时制 / 24小时制
- **回车键行为**：发送消息 / 换行
- **自动播放语音**：开启/关闭

#### 多媒体设置

- **图片质量**：原图 / 压缩
- **自动下载图片**：开启/关闭
- **视频自动播放**：开启/关闭
- **语音自动播放**：开启/关闭

#### 数据设置

- **缓存管理**：清除缓存
- **数据导出**：导出设置
- **API 地址**：配置 Chatlog API 地址

#### 关于

- 应用版本信息
- 开源许可
- 反馈和建议
- 检查更新

---

## 4. 常见问题

### 4.1 连接问题

**Q: 无法连接到 Chatlog API？**

A: 请检查：
1. Chatlog 服务是否正在运行
2. API 地址是否正确（默认：`http://127.0.0.1:5030`）
3. 防火墙是否阻止了连接
4. 浏览器控制台是否有错误信息

**Q: 连接超时怎么办？**

A: 
1. 检查 Chatlog 服务状态
2. 尝试重启 Chatlog 服务
3. 检查网络连接
4. 增加超时时间设置

### 4.2 数据问题

**Q: 为什么看不到聊天记录？**

A: 可能的原因：
1. Chatlog 数据库尚未解密
2. 没有选择正确的微信账号
3. 数据库文件损坏
4. 权限问题

解决方法：
- 运行 `chatlog decrypt` 解密数据库
- 在 Chatlog 中切换正确的账号
- 重新导出微信数据

**Q: 图片无法显示？**

A: 检查：
1. 多媒体文件路径是否正确
2. Chatlog 是否已解密图片
3. 图片文件是否存在
4. 浏览器是否阻止了图片加载

### 4.3 性能问题

**Q: 应用运行缓慢？**

A: 优化建议：
1. 清除浏览器缓存
2. 减少同时加载的消息数量
3. 关闭不必要的多媒体自动加载
4. 使用性能更好的浏览器（推荐 Chrome/Edge）

**Q: 加载消息时间过长？**

A: 
1. 检查 Chatlog API 响应速度
2. 减少单次加载的消息数量
3. 使用时间范围筛选
4. 考虑优化数据库

### 4.4 功能问题

**Q: 搜索结果不准确？**

A: 
1. 使用更具体的关键词
2. 尝试使用高级筛选
3. 检查时间范围设置
4. 确认数据库完整性

**Q: 语音无法播放？**

A: 
1. 检查浏览器是否支持音频播放
2. 确认 Chatlog 已转换 SILK 格式
3. 检查音频文件是否存在
4. 尝试更新浏览器

### 4.5 界面问题

**Q: 界面显示异常？**

A: 
1. 刷新页面
2. 清除浏览器缓存
3. 更新到最新版本
4. 尝试其他浏览器

**Q: 移动端显示不正常？**

A: 
1. 使用竖屏模式
2. 检查浏览器缩放比例
3. 更新浏览器版本
4. 尝试其他移动浏览器

---

## 5. 最佳实践

### 5.1 高效使用

**组织会话**：
- 使用置顶功能标记重要会话
- 定期清理不需要的会话
- 使用标签分类（即将推出）

**搜索技巧**：
- 使用准确的关键词
- 善用高级筛选缩小范围
- 保存常用搜索条件

**数据管理**：
- 定期导出重要聊天记录
- 及时清理缓存释放空间
- 备份重要数据

### 5.2 性能优化

**减少加载时间**：
- 限制单次加载消息数量
- 使用虚拟滚动
- 延迟加载多媒体内容

**节省存储空间**：
- 不自动下载所有图片
- 定期清理缓存
- 压缩导出的数据

**提升体验**：
- 使用键盘快捷键
- 启用暗色主题（省电）
- 调整字体大小到舒适状态

### 5.3 安全建议

**保护隐私**：
- 不在公共设备上使用
- 离开时及时关闭应用
- 不分享屏幕截图中的敏感信息

**数据安全**：
- 定期备份重要数据
- 谨慎处理导出的文件
- 不使用不可信的第三方工具

**账号安全**：
- 确保 Chatlog 数据源可信
- 不使用他人的数据库文件
- 注意数据使用权限

---

## 6. 快捷键

### 6.1 全局快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl/Cmd + K` | 打开全局搜索 |
| `Ctrl/Cmd + ,` | 打开设置 |
| `Ctrl/Cmd + R` | 刷新当前页面 |
| `Ctrl/Cmd + W` | 关闭当前标签 |
| `ESC` | 关闭弹窗/返回 |

### 6.2 会话列表

| 快捷键 | 功能 |
|--------|------|
| `↑` `↓` | 切换会话 |
| `Enter` | 打开选中的会话 |
| `Ctrl/Cmd + F` | 搜索会话 |
| `Ctrl/Cmd + N` | 新建会话（即将推出）|

### 6.3 消息浏览

| 快捷键 | 功能 |
|--------|------|
| `↑` `↓` | 滚动消息 |
| `PageUp` `PageDown` | 快速滚动 |
| `Home` | 跳转到最新消息 |
| `End` | 跳转到最早消息 |
| `Ctrl/Cmd + F` | 会话内搜索 |
| `Ctrl/Cmd + C` | 复制选中文本 |

### 6.4 多媒体查看

| 快捷键 | 功能 |
|--------|------|
| `Space` | 播放/暂停 |
| `←` `→` | 切换上一个/下一个 |
| `+` `-` | 放大/缩小 |
| `Ctrl/Cmd + S` | 保存/下载 |
| `ESC` | 关闭查看器 |
| `F` | 全屏 |

### 6.5 自定义快捷键

在设置中可以自定义快捷键：

1. 进入设置 > 快捷键
2. 点击要修改的快捷键
3. 按下新的组合键
4. 保存设置

---

## 7. 更新日志

### v1.0.0 (2026-01)
- ✅ 基础聊天记录查看
- ✅ 会话列表管理
- ✅ 简单搜索功能
- ✅ 联系人列表

### v1.1.0 (2026-02)
- ✅ 图片预览和下载
- ✅ 视频播放支持
- ✅ 语音播放支持
- ✅ 文件下载功能

### v1.2.0 (2026-03)
- ✅ 全局搜索
- ✅ 高级筛选
- ✅ 搜索结果高亮
- ✅ 搜索历史

---

## 8. 获取帮助

### 报告问题

如果您遇到问题或有建议，请：

1. **GitHub Issues**: https://github.com/xlight/chatlog-session/issues
2. **讨论区**: https://github.com/xlight/chatlog-session/discussions
3. **邮件**: 发送至项目维护者

### 参与贡献

欢迎参与项目开发：

1. Fork 项目仓库
2. 创建功能分支
3. 提交 Pull Request
4. 参与代码审查

### 相关资源

- [Chatlog 项目](https://github.com/sjzar/chatlog)
- [产品设计文档](./PRODUCT_DESIGN.md)
- [开发者指南](./DEVELOPER_GUIDE.md)
- [API 文档](./API_REFERENCE.md)

---

**感谢使用 Chatlog Session！** 🎉

如有任何问题或建议，欢迎随时反馈。
